@model CRM.BusinessLayer.BusinessModels.QuoteDetails
@{
    ViewBag.Title = "GenerateQuote";
    Layout = "~/Views/Shared/_MasterLayout.cshtml";
}

<section class="content-header">
    <h1></h1>
    <ol class="breadcrumb">
        <li><a href="#"><i class="fa fa-dashboard"></i> Home</a></li>
        <li class="active">@Html.ActionLink("View Quote", "ViewQuote")</li>
    </ol>
</section>
<br />
<section class="content" ng-app="myapp" ng-controller="ListController">
    <div class="row">
        <div class="col-md-12">
            <div class="box box-warning">
                <div class="box-header with-border">
                    <h3 class="box-title">New Quote Generation</h3>
                    <input type="submit" value="Generate" class="btn btn-success pull-right" ng-click="create()" />
                </div>
                <div class="box-body">
                    <div class="col-md-5">
                        <div class="form-group">
                            @*<label for="Customer">Select Customer</label>
                            @Html.DropDownListFor(m => m.CustomerID, new SelectList(Model.custList, "CustomerID", "CustomerName"), "Select Customer", new { @class = "form-control" })
                            <br />*@
                            <select data-ng-model="cust"
                                    data-ng-options="c.CustomerID as c.CustomerName for c in customeDetails" class="form-control" ng-init="GetData()" data-ng-change="GetCustomerDetails()">
                                <option value="">--Select Company--</option>
                            </select>
                        </div>
                    </div><br /><br /><hr />
                    <div class="col-md-12" id="custDetails">
                        <div class="box-header with-border">
                            <h3 class="box-title">Customer Details</h3></div><br />
                            <div class="col-md-5">

                                <div class="form-group">
                                    <label class="control-label">Primay Email</label>
                                    <div class="">
                                        <input type="text" class="form-control" id="PrimaryMail" placeholder="Description" ng-model="PrimaryMail">
                                    </div>
                                </div>

                                <div class="form-group">
                                    <label class="control-label">Primay Phone</label>
                                    <div class="">
                                        <input type="text" class="form-control" id="PrimaryPhone" placeholder="Description" ng-model="PrimayPhone">
                                    </div>
                                </div>
                            </div>
                            <div class="col-md-5">
                                <div class="form-group">
                                    <label class="control-label">Contact Person Name</label>
                                    <div class="">
                                        <input type="text" class="form-control" id="PersonName" placeholder="Description" ng-model="PersonName">
                                    </div>
                                </div>
                                <div class="form-group">
                                    <label class="control-label">Contact Person No</label>
                                    <div class="">
                                        <input type="text" class="form-control" id="PrimaryPhone" ng-model="PersonNo">
                                    </div>
                                </div>
                            </div>
                            <div>

                                <div class="col-md-5">

                                    <div class="form-group">
                                        <label class="control-label">Billing Address</label>
                                        <div class="">
                                            <input type="text" class="form-control" id="BillingAddress" ng-model="BillingAddress">
                                        </div>
                                    </div>
                                    <div class="form-group">
                                        <label class="control-label">Billing Address 1</label>
                                        <div class="">
                                            <input type="text" class="form-control" id="BillingAddress1" ng-model="BillingAddress1">
                                        </div>
                                    </div>
                                    <div class="form-group">
                                        <label class="control-label">Billing City</label>
                                        <div class="">
                                            <input type="text" class="form-control" id="BillingCity" ng-model="BillingCity">
                                        </div>
                                    </div>
                                    <div class="form-group">
                                        <label class="control-label">Billing State</label>
                                        <div class="">
                                            <input type="text" class="form-control" id="BillingState" ng-model="BillingState">
                                        </div>
                                    </div>
                                    <div class="form-group">
                                        <label class="control-label">Billing Country</label>
                                        <div class="">
                                            <input type="text" class="form-control" id="BillingCountry" ng-model="BillingCountry">
                                        </div>
                                    </div>
                                    <div class="form-group">
                                        <label class="control-label">Billing Pincode</label>
                                        <div class="">
                                            <input type="text" class="form-control" id="BillingPincode" ng-model="BillingPincode">
                                        </div>
                                    </div>
                                </div>
                                <div class="col-md-5">
                                    <div class="form-group">
                                        <label class="control-label">Shipping Address</label>
                                        <div class="">
                                            <input type="text" class="form-control" id="ShippingAddress" ng-model="ShippingAddress">
                                        </div>
                                    </div>
                                    <div class="form-group">
                                        <label class="control-label">Shipping Address1</label>
                                        <div class="">
                                            <input type="text" class="form-control" id="ShippingAddress1" ng-model="ShippingAddress1">
                                        </div>
                                    </div>
                                    <div class="form-group">
                                        <label class="control-label">Shipping City</label>
                                        <div class="">
                                            <input type="text" class="form-control" id="ShippingCity" ng-model="ShippingCity">
                                        </div>
                                    </div>
                                    <div class="form-group">
                                        <label class="control-label">Shipping State</label>
                                        <div class="">
                                            <input type="text" class="form-control" id="ShippingState" ng-model="ShippingState">
                                        </div>
                                    </div>
                                    <div class="form-group">
                                        <label class="control-label">Shipping Country</label>
                                        <div class="">
                                            <input type="text" class="form-control" id="ShippingCountry" ng-model="ShippingCountry">
                                        </div>
                                    </div>
                                    <div class="form-group">
                                        <label class="control-label">Shipping Pincode</label>
                                        <div class="">
                                            <input type="text" class="form-control" id="ShippingPincode" ng-model="ShippingPincode">
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
               

                </div>
                </div>
        <div class="col-md-12">
            <div class="box box-primary">
                <div class="box-header with-border">
                    <h3 class="box-title">Product Details</h3>
                </div>
                <div class="box-body">

                    <div class="panel panel-default" >
                        <div class="panel-body">

                          

                            <form ng-submit="addNew()">
                                <table class="table table-striped table-bordered">
                                    <thead>
                                        <tr>
                                            <th><input type="checkbox" ng-model="selectedAll" ng-click="checkAll()" /></th>
                                            <th>Description</th>
                                            <th>Price</th>
                                            <th>Qty</th>
                                            <th>Item Amount</th>
                                        </tr>
                                    </thead>
                                    <tbody>
                                        <tr ng-repeat="quoteDetail in quoteDetails">
                                            <td>
                                                <input type="checkbox" ng-model="quoteDetail.selected" />
                                            </td>
                                            <td>
                                                <input type="text" class="form-control" ng-model="quoteDetail.desc" required />
                                            </td>
                                            <td>
                                                <input type="number" class="form-control" ng-model="quoteDetail.price" required />
                                            </td>
                                            <td>
                                                <input type="number" class="form-control" ng-model="quoteDetail.qty" ng-change="calItemTot($index)" required />
                                            </td>
                                            <td>
                                                <input type="number" class="form-control" readonly="readonly" ng-model="quoteDetail.totAmount" required />
                                            </td>
                                        </tr>
                                    </tbody>
                                </table>
                                <div class="form-group pull-right">
                                    <label for="BillingAddress">Total</label>
                                    <input type="number" class="form-control" readonly="readonly" ng-model="total" />
                                    </div>
                                <br /><br /><br />
                                    <div class="form-group">
                                        <input ng-hide="!quoteDetails.length" type="button" class="btn btn-danger pull-right" ng-click="remove()" value="Remove">
                                        <input type="submit" class="btn btn-primary addnew pull-right" value="Add New">&nbsp;&nbsp;
                                    </div>
</form>
                        </div>
                    </div>
                    </div>
                </div>
            </div>
        </div>
</section>
<script src="~/scripts/angular.js"></script>
<script src="~/scripts/AngularCode/QuoteData.js"></script>
